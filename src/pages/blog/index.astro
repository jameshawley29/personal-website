---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogCard from '../../components/BlogCard.astro';

const allPosts = await Astro.glob('./*.md');
const sortedPosts = allPosts.sort((a, b) =>
  new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<BaseLayout
  title="Blog"
  description="Browse all articles about web development, programming tutorials, and technology insights. Stay updated with the latest tips and best practices."
>
  <div class="blog-page">
    <header class="page-header">
      <h1>Blog</h1>
      <p>Articles, tutorials, and insights about web development and technology.</p>
    </header>

    <div class="posts-grid">
      {sortedPosts.map((post) => (
        <BlogCard
          title={post.frontmatter.title}
          description={post.frontmatter.description}
          pubDate={new Date(post.frontmatter.pubDate)}
          url={post.url || ''}
        />
      ))}
    </div>
  </div>
</BaseLayout>

<style>
  .blog-page {
    max-width: 1000px;
    margin: 0 auto;
  }

  .page-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .page-header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .page-header p {
    font-size: 1.2rem;
    color: #666;
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
  }
</style>
