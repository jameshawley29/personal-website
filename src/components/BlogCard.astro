---
interface Props {
  title: string;
  description: string;
  pubDate: Date;
  url: string;
  category?: "tech" | "economics" | "books" | "projects" | "thoughts";
}

const { title, description, pubDate, url, category } = Astro.props;
const formattedDate = new Date(pubDate).toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});

const categoryMap = {
  tech: { label: "Technology", href: "/tech" },
  economics: { label: "Economics", href: "/economics" },
  books: { label: "Book Review", href: "/books" },
  projects: { label: "Project", href: "/projects" },
  thoughts: { label: "Thoughts", href: "/thoughts" },
};

const categoryInfo = category ? categoryMap[category] : null;
---

<article class="article-item">
  <div class="article-meta">
    {
      categoryInfo && (
        <a href={categoryInfo.href} class="category-tag">
          {categoryInfo.label}
        </a>
      )
    }
    <time datetime={pubDate.toISOString()}>{formattedDate}</time>
  </div>
  <a href={url} class="article-link">
    <h2>{title}</h2>
    <p>{description}</p>
  </a>
</article>

<style>
  .article-item {
    padding: 1.75rem 0;
    border-bottom: 1px solid var(--border-light);
    transition: padding 0.3s ease;
  }

  .article-item:first-child {
    padding-top: 0;
  }

  .article-item:hover {
    padding-left: 1rem;
  }

  .article-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
  }

  .article-item time {
    font-size: 0.8125rem;
    color: var(--text-muted);
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .article-link {
    text-decoration: none;
    display: block;
    position: relative;
  }

  .article-link::before {
    content: "";
    position: absolute;
    left: -1rem;
    top: 50%;
    transform: translateY(-50%) translateX(-10px);
    width: 4px;
    height: 0;
    background: var(--uva-orange);
    transition:
      height 0.3s ease,
      transform 0.3s ease;
    border-radius: 2px;
  }

  .article-item:hover .article-link::before {
    height: 60%;
    transform: translateY(-50%) translateX(0);
  }

  .article-item h2 {
    font-family: Georgia, "Times New Roman", serif;
    font-size: 1.375rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    line-height: 1.3;
    letter-spacing: -0.01em;
    transition: all 0.3s ease;
    background: linear-gradient(135deg, var(--uva-blue), var(--uva-orange));
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 200%;
    background-position: 0% 50%;
  }

  .article-item h2 {
    -webkit-text-fill-color: var(--text-primary);
  }

  .article-item:hover h2 {
    -webkit-text-fill-color: transparent;
    background-position: 100% 50%;
  }

  .article-item p {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-muted);
    margin-bottom: 0;
  }
</style>
